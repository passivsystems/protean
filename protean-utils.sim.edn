;; Protean Sim Utilities
;;;;;;;;;;;;;;;;;;;;;;;;

(ns protean.sim.utils
  (:require [protean.api.transformation.sim :refer :all]
            [taoensso.timbre :as l]))

;; =============================================================================
;; Utility Functions
;; =============================================================================

(defn echo [req] (l/info ">>>> echo request: " (dissoc req :tree :response :endpoint :protean-home)))

;; =============================================================================
;; Utility Endpoints
;; =============================================================================

{
  "protean-utils" {
    "echo" {
      :get (fn [req] (echo req) (response req 200))
      :post (fn [req] (echo req) (response req 201))
      :put (fn [req] (echo req) (response req 204))
      :patch (fn [req] (echo req) (response req 204))
    }
  }
}
